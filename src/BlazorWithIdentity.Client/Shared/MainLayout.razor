@inherits LayoutComponentBase
@inject NavigationManager navigationManager
@inject IdentityAuthenticationStateProvider authStateProvider
@using Microsoft.Fast.Components.FluentUI

    <AuthorizeView>
        <Authorized>
            @*Show the menu and the rest of the body*@
     <div class="row-sm">
             <FluentDesignSystemProvider  fill-color="#2A1B3D" style="padding:10px;min-width:100%">
                  <FluentToolbar id="toolbar-fluent-components-main" style="width:100%" >

                        <NavLinkFluentAnchor Href="/" Appearance="Appearance.Outline">Home</NavLinkFluentAnchor>
                           <h5 slot="end">Hi, @context.User.Identity.Name  <FluentCheckbox  @onclick="@LogoutClick" slot="end">Log out</FluentCheckbox> </h5>   
                      </FluentToolbar>


     </FluentDesignSystemProvider>
       
     </div>
      <div class="row">
          <Toast></Toast>

        <div  class="col-md-2 color-bg-light-neutral-mid">
                 <NavMenu />
        </div>
        <div class="col-md-22">
                
            <p></p>
             @Body
        </div>

        </div>
        
     

              
           
       

              
            
      <Footer/>

        </Authorized>
        <NotAuthorized>
            @*Just render the body so that RedirectToLogin works*@
            @Body
        </NotAuthorized>
    </AuthorizeView>



@code{

    async Task LogoutClick()
    {
        await authStateProvider.Logout();
        navigationManager.NavigateTo("/login");
    }
}